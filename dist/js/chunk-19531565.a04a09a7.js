(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-19531565"],{"23e9":function(t,e,n){"use strict";var i=n("e9bd"),r=n.n(i);r.a},b7d4:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"create"},[n("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-position":"right","label-width":"100px"}},[n("el-form-item",{attrs:{label:"问卷名称",prop:"title"}},[n("el-input",{model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),n("el-form-item",{attrs:{label:"问卷介绍",prop:"intro"}},[n("el-input",{attrs:{type:"textarea",rows:"5"},model:{value:t.form.intro,callback:function(e){t.$set(t.form,"intro",e)},expression:"form.intro"}})],1),n("div",{staticClass:"add-option"},[n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.addOption(t.questionType.SINGLE_CHOICE)}}},[t._v("单选题")]),n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.addOption(t.questionType.SINGLE_CHOICE)}}},[t._v("单选带子选")]),n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.addOption(t.questionType.SINGLE_CHOICE)}}},[t._v("单选带填空")]),n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.addOption(t.questionType.MULTIPLE_CHOICE)}}},[t._v("多选题")]),n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.addOption(t.questionType.SINGLE_CHOICE)}}},[t._v("单选带子选")]),n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.addOption(t.questionType.SINGLE_CHOICE)}}},[t._v("多选带填空")]),n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.addOption(t.questionType.SINGLE_CHOICE)}}},[t._v("不选填空")]),n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.addOption(t.questionType.SINGLE_CHOICE)}}},[t._v("单选填空")]),n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.addOption(t.questionType.SINGLE_CHOICE)}}},[t._v("多选填空")]),n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.addOption(t.questionType.TEXT_QUESTION)}}},[t._v("文本题")])],1),n("question-list",{attrs:{"question-list":t.form.topic},on:{delQuestion:t.onDelQuestion,addOption:t.onAddOption,delOption:t.onDelOption}}),n("el-form-item",{attrs:{label:"截止时间",prop:"deadline"}},[n("el-date-picker",{attrs:{type:"datetime","picker-options":t.datePickerOptions,placeholder:"选择日期时间"},model:{value:t.form.deadline,callback:function(e){t.$set(t.form,"deadline",e)},expression:"form.deadline"}})],1),n("el-form-item",[n("el-button",{attrs:{type:"default"},on:{click:function(e){return t.submitNaire(t.NaireStatus.UNPUBLISHED)}}},[t._v("保存问卷")]),n("el-button",{attrs:{type:"success"},on:{click:function(e){return t.submitNaire(t.NaireStatus.PUBLISHED)}}},[t._v("发布问卷")])],1)],1)],1)},r=[],o=(n("ea69"),n("6a61"),n("cf7f")),a=n("e793"),s=n("1462"),u=n("a340"),c=n("bb06"),p=n("9691"),l=n("0372"),d=n("e4a1"),f=n("cf24"),m=n.n(f),b=n("3ec7"),y=n("5d15"),O=n("f6b1"),v=n("9bcc"),k=function(t){Object(c["a"])(n,t);var e=Object(p["a"])(n);function n(){var t;return Object(s["a"])(this,n),t=e.apply(this,arguments),t.questionType=y["a"],t.NaireStatus=O["a"],t.form={title:"",intro:"",deadline:"",status:0,options:"",topic:[]},t.rules={title:[{required:!0,message:"请输入问卷标题",trigger:"blur"}],deadline:[{required:!0,message:"请选择截止时间",trigger:"blur"}]},t.datePickerOptions={disabledDate:function(t){return t.getTime()<m()().add(-1,"day").valueOf()}},t}return Object(u["a"])(n,[{key:"onAddOption",value:function(t){var e=t.index,n={content:"选项",isAddition:!1,image:"",desc:""};this.form.topic[e].options.push(Object(a["a"])({},n))}},{key:"onDelOption",value:function(t){var e=t.index,n=t.opIndex;if(this.form.topic[e].options.length<2)return this.$message.warning("已经是最后一个选项，无法删除。");this.form.topic[e].options.splice(n,1)}},{key:"onDelQuestion",value:function(t){var e=t.index;this.form.topic.splice(e,1)}},{key:"addOption",value:function(t){switch(t){case y["a"].SINGLE_CHOICE:var e={question:"单选题目",options:[{content:"选项",isAddition:!1,image:"",desc:""}],description:"",type:"单选",isRequired:!0,selectContent:"",setting:{last:1},additional:""};this.form.topic.push(e);break;case y["a"].MULTIPLE_CHOICE:var n={question:"多选题目",options:[{content:"选项",isAddition:!1,image:"",desc:""}],description:"",type:"多选",isRequired:!0,setting:{last:1},selectMultipleContent:[]};this.form.topic.push(n);break;case y["a"].TEXT_QUESTION:var i={question:"文本题目",description:"",type:"文本",isRequired:!0,setting:{},selectContent:""};this.form.topic.push(i);break}}},{key:"submitNaire",value:function(t){var e=this,n=this.$refs.form;n.validate(function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(n){var i,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return");case 2:if(0!==e.form.topic.length){t.next=4;break}return t.abrupt("return",e.$message.warning("请至少添加一道题目。"));case 4:return i={naire:Object(a["a"])(Object(a["a"])({},e.form),{},{deadline:new Date(e.form.deadline).getTime()}),status:"create"},t.next=7,b["c"](i);case 7:if(r=t.sent,!r.success){t.next=14;break}return e.$message.success("新建问卷成功！"),t.next=12,e.$router.push("/list");case 12:t.next=15;break;case 14:e.$message.error(r.msg);case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}]),n}(d["c"]);k=l["a"]([Object(d["a"])({components:{QuestionList:v["a"]}})],k);var h=k,E=h,C=(n("23e9"),n("9ca4")),I=Object(C["a"])(E,i,r,!1,null,"e9d9f8c6",null);e["default"]=I.exports},e9bd:function(t,e,n){}}]);
//# sourceMappingURL=chunk-19531565.a04a09a7.js.map