(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-059ff6fd"],{"6b60":function(e,t,i){"use strict";var n=i("faae"),r=i.n(n);r.a},b7d4:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"create"},[i("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-position":"right","label-width":"100px"}},[i("el-form-item",{attrs:{label:"问卷名称",prop:"title"}},[i("el-input",{model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),i("el-form-item",{attrs:{label:"问卷介绍",prop:"intro"}},[i("el-input",{attrs:{type:"textarea",rows:"5"},model:{value:e.form.intro,callback:function(t){e.$set(e.form,"intro",t)},expression:"form.intro"}})],1),i("div",{staticClass:"add-option"},[i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addOption(e.questionType.SINGLE_CHOICE)}}},[e._v("单选题")]),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addOption(e.questionType.MULTIPLE_CHOICE)}}},[e._v("多选题")]),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addOption(e.questionType.TEXT_QUESTION)}}},[e._v("文本题")])],1),i("question-list",{attrs:{"question-list":e.form.topic},on:{delQuestion:e.onDelQuestion,addOption:e.onAddOption,delOption:e.onDelOption}}),i("el-form-item",{attrs:{label:"截止时间",prop:"deadline"}},[i("el-date-picker",{attrs:{type:"datetime","picker-options":e.datePickerOptions,placeholder:"选择日期时间"},model:{value:e.form.deadline,callback:function(t){e.$set(e.form,"deadline",t)},expression:"form.deadline"}})],1),i("el-form-item",[i("el-button",{attrs:{type:"default"},on:{click:function(t){return e.submitNaire(e.NaireStatus.UNPUBLISHED)}}},[e._v("保存问卷")]),i("el-button",{attrs:{type:"success"},on:{click:function(t){return e.submitNaire(e.NaireStatus.PUBLISHED)}}},[e._v("发布问卷")])],1)],1)],1)},r=[],a=(i("ea69"),i("6a61"),i("cf7f")),o=i("e793"),s=i("1462"),c=i("a340"),u=i("bb06"),l=i("9691"),p=i("0372"),d=i("e4a1"),f=i("cf24"),m=i.n(f),b=i("3ec7"),v=i("5d15"),h=i("f6b1"),O=i("9bcc"),k=function(e){Object(u["a"])(i,e);var t=Object(l["a"])(i);function i(){var e;return Object(s["a"])(this,i),e=t.apply(this,arguments),e.questionType=v["a"],e.NaireStatus=h["a"],e.form={title:"",intro:"",deadline:"",status:0,options:"",topic:[]},e.rules={title:[{required:!0,message:"请输入问卷标题",trigger:"blur"}],deadline:[{required:!0,message:"请选择截止时间",trigger:"blur"}]},e.datePickerOptions={disabledDate:function(e){return e.getTime()<m()().add(-1,"day").valueOf()}},e}return Object(c["a"])(i,[{key:"onAddOption",value:function(e){var t=e.index,i={content:"选项",isAddition:!1,image:"",desc:""};this.form.topic[t].options.push(Object(o["a"])({},i))}},{key:"onDelOption",value:function(e){var t=e.index,i=e.opIndex;if(this.form.topic[t].options.length<2)return this.$message.warning("已经是最后一个选项，无法删除。");this.form.topic[t].options.splice(i,1)}},{key:"onDelQuestion",value:function(e){var t=e.index;this.form.topic.splice(t,1)}},{key:"addOption",value:function(e){switch(e){case v["a"].SINGLE_CHOICE:var t={question:"单选题目",options:[{content:"选项",isAddition:!1,image:"",desc:""}],description:"",type:"单选",isRequired:!0,selectContent:"",setting:{last:1},additional:""};this.form.topic.push(t);break;case v["a"].MULTIPLE_CHOICE:var i={question:"多选题目",options:[{content:"选项",isAddition:!1,image:"",desc:""}],description:"",type:"多选",isRequired:!0,setting:{last:1},selectMultipleContent:[]};this.form.topic.push(i);break;case v["a"].TEXT_QUESTION:var n={question:"文本题目",description:"",type:"文本",isRequired:!0,setting:{},selectContent:""};this.form.topic.push(n);break}}},{key:"submitNaire",value:function(e){var t=this,i=this.$refs.form;i.validate(function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(i){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i){e.next=2;break}return e.abrupt("return");case 2:if(0!==t.form.topic.length){e.next=4;break}return e.abrupt("return",t.$message.warning("请至少添加一道题目。"));case 4:return n={naire:Object(o["a"])(Object(o["a"])({},t.form),{},{deadline:new Date(t.form.deadline).getTime()}),status:"create"},e.next=7,b["c"](n);case 7:if(r=e.sent,!r.success){e.next=14;break}return t.$message.success("新建问卷成功！"),e.next=12,t.$router.push("/list");case 12:e.next=15;break;case 14:t.$message.error(r.msg);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),i}(d["c"]);k=p["a"]([Object(d["a"])({components:{QuestionList:O["a"]}})],k);var g=k,y=g,x=(i("6b60"),i("9ca4")),w=Object(x["a"])(y,n,r,!1,null,"8ca3463c",null);t["default"]=w.exports},faae:function(e,t,i){}}]);
//# sourceMappingURL=chunk-059ff6fd.c4b25db8.js.map