{"version":3,"sources":["webpack:///./src/views/create/create.vue?a9bf","webpack:///./src/views/create/create.vue?3f96","webpack:///./src/views/create/create.vue","webpack:///./src/views/create/create.vue?2ad1","webpack:///./src/views/create/create.vue?18e2"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","ref","attrs","form","rules","model","value","callback","$$v","$set","expression","on","$event","addOption","questionType","SINGLE_CHOICE","_v","MULTIPLE_CHOICE","TEXT_QUESTION","topic","onDelQuestion","onAddOption","onDelOption","datePickerOptions","submitNaire","NaireStatus","UNPUBLISHED","PUBLISHED","staticRenderFns","title","intro","deadline","status","options","required","message","trigger","disabledDate","time","getTime","add","valueOf","index","tempData","content","isAddition","image","desc","push","opIndex","length","$message","warning","splice","type","radioQues","question","description","isRequired","selectContent","setting","last","additional","checkboxQues","selectMultipleContent","textareaQues","$refs","validate","valid","params","naire","Date","res","success","$router","error","msg","components","QuestionList","component"],"mappings":"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","file":"js/chunk-059ff6fd.c4b25db8.js","sourcesContent":["import mod from \"-!../../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/_sass-loader@8.0.2@sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./create.vue?vue&type=style&index=0&id=8ca3463c&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/_sass-loader@8.0.2@sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./create.vue?vue&type=style&index=0&id=8ca3463c&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"create\"},[_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.form,\"rules\":_vm.rules,\"label-position\":\"right\",\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"问卷名称\",\"prop\":\"title\"}},[_c('el-input',{model:{value:(_vm.form.title),callback:function ($$v) {_vm.$set(_vm.form, \"title\", $$v)},expression:\"form.title\"}})],1),_c('el-form-item',{attrs:{\"label\":\"问卷介绍\",\"prop\":\"intro\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"rows\":\"5\"},model:{value:(_vm.form.intro),callback:function ($$v) {_vm.$set(_vm.form, \"intro\", $$v)},expression:\"form.intro\"}})],1),_c('div',{staticClass:\"add-option\"},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.addOption(_vm.questionType.SINGLE_CHOICE)}}},[_vm._v(\"单选题\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.addOption(_vm.questionType.MULTIPLE_CHOICE)}}},[_vm._v(\"多选题\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.addOption(_vm.questionType.TEXT_QUESTION)}}},[_vm._v(\"文本题\")])],1),_c('question-list',{attrs:{\"question-list\":_vm.form.topic},on:{\"delQuestion\":_vm.onDelQuestion,\"addOption\":_vm.onAddOption,\"delOption\":_vm.onDelOption}}),_c('el-form-item',{attrs:{\"label\":\"截止时间\",\"prop\":\"deadline\"}},[_c('el-date-picker',{attrs:{\"type\":\"datetime\",\"picker-options\":_vm.datePickerOptions,\"placeholder\":\"选择日期时间\"},model:{value:(_vm.form.deadline),callback:function ($$v) {_vm.$set(_vm.form, \"deadline\", $$v)},expression:\"form.deadline\"}})],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"default\"},on:{\"click\":function($event){return _vm.submitNaire(_vm.NaireStatus.UNPUBLISHED)}}},[_vm._v(\"保存问卷\")]),_c('el-button',{attrs:{\"type\":\"success\"},on:{\"click\":function($event){return _vm.submitNaire(_vm.NaireStatus.PUBLISHED)}}},[_vm._v(\"发布问卷\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue } from 'vue-property-decorator'\nimport dayjs from 'dayjs'\nimport { Form as ElForm } from 'element-ui'\n\nimport * as NaireAction from '@/api/naire'\n\nimport { questionType, questionTypeText } from '@/config/enum/questionType'\nimport { NaireStatus } from '@/config/enum/naireStatus'\n\nimport QuestionList from '@/components/Question/QuestionList.vue'\n\n@Component({\n  components: {\n    QuestionList\n  }\n})\nexport default class NavBar extends Vue {\n  private questionType = questionType\n  private NaireStatus = NaireStatus\n  private form:Questionnaire.INaire = {\n    title: '',\n    intro: '',\n    deadline: '',\n    status: 0,\n    options: '',\n    topic: []\n  }\n\n  private rules = {\n    title: [\n      { required: true, message: '请输入问卷标题', trigger: 'blur' }\n    ],\n    deadline: [\n      { required: true, message: '请选择截止时间', trigger: 'blur' }\n    ]\n  }\n\n  private datePickerOptions = {\n    disabledDate (time: Date) {\n      return time.getTime() < dayjs().add(-1, 'day').valueOf()\n    }\n  }\n\n  private onAddOption ({ index }: { index: number }) {\n    const tempData = {\n      content: '选项',\n      isAddition: false,\n      image: '', // 选项图片\n      desc: ''\n    }\n    this.form.topic[index].options!.push({ ...tempData })\n  }\n\n  private onDelOption ({ index, opIndex }: { index: number, opIndex: number }) {\n    if (this.form.topic[index].options!.length < 2) {\n      return this.$message.warning('已经是最后一个选项，无法删除。')\n    }\n    this.form.topic[index].options!.splice(opIndex, 1)\n  }\n\n  private onDelQuestion ({ index }: { index: number }) {\n    this.form.topic.splice(index, 1)\n  }\n\n  addOption (type: questionTypeText) {\n    switch (type) {\n      case questionType.SINGLE_CHOICE:\n        const radioQues = {\n          question: '单选题目',\n          options: [\n            {\n              content: '选项',\n              isAddition: false,\n              image: '',\n              desc: ''\n            }\n          ],\n          description: '',\n          type: '单选',\n          isRequired: true,\n          selectContent: '',\n          setting: {\n            last: 1\n          },\n          additional: ''\n        }\n        this.form.topic.push(radioQues)\n        break\n      case questionType.MULTIPLE_CHOICE:\n        const checkboxQues = {\n          question: '多选题目',\n          options: [\n            {\n              content: '选项',\n              isAddition: false,\n              image: '',\n              desc: ''\n            }\n          ],\n          description: '',\n          type: '多选',\n          isRequired: true,\n          setting: {\n            last: 1 // 最少选择几项\n          },\n          selectMultipleContent: []\n        }\n        this.form.topic.push(checkboxQues)\n        break\n      case questionType.TEXT_QUESTION:\n        const textareaQues = {\n          question: '文本题目',\n          description: '',\n          type: '文本',\n          isRequired: true,\n          setting: {},\n          selectContent: ''\n        }\n        this.form.topic.push(textareaQues)\n        break\n    }\n  }\n\n  submitNaire (type: NaireStatus) {\n    const form = this.$refs.form as ElForm\n    form.validate(async (valid) => {\n      if (!valid) return\n      if (this.form.topic.length === 0) {\n        return this.$message.warning('请至少添加一道题目。')\n      }\n      const params = {\n        naire: {\n          ...this.form,\n          deadline: new Date(this.form.deadline).getTime()\n        },\n        status: 'create'\n      }\n      const res = await NaireAction.create(params)\n      if (res.success) {\n        this.$message.success('新建问卷成功！')\n        await this.$router.push('/list')\n      } else {\n        this.$message.error(res.msg)\n      }\n    })\n  }\n}\n","import mod from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js!../../../node_modules/_ts-loader@6.2.2@ts-loader/index.js??ref--14-3!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./create.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js!../../../node_modules/_ts-loader@6.2.2@ts-loader/index.js??ref--14-3!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./create.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./create.vue?vue&type=template&id=8ca3463c&scoped=true&\"\nimport script from \"./create.vue?vue&type=script&lang=ts&\"\nexport * from \"./create.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./create.vue?vue&type=style&index=0&id=8ca3463c&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"8ca3463c\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}